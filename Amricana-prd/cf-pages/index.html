<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตุฉ ุชูุฒูุน ุงูุญูููุงุช ุงูุฐููุฉ - SSDP</title>
    <meta name="description" content="ููุตุฉ ุชูุฒูุน ุงูุญูููุงุช ุงูุฐููุฉ ูู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/assets/css/main.css" as="style">
    <link rel="preload" href="/assets/js/main.js" as="script">
    <link rel="preload" href="/assets/fonts/noto-sans-arabic.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/components.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ea580c">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
    
    <!-- Open Graph -->
    <meta property="og:title" content="ููุตุฉ ุชูุฒูุน ุงูุญูููุงุช ุงูุฐููุฉ">
    <meta property="og:description" content="ุชูููู ุณูู ุชูุฒูุน ุงูุญูููุงุช ูู ุงูุณุนูุฏูุฉ">
    <meta property="og:image" content="/assets/images/og-image.jpg">
    <meta property="og:type" content="website">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-animation">
            <div class="honey-drop"></div>
            <div class="loading-text">ุฌุงุฑู ุงูุชุญููู...</div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="/assets/icons/logo.svg" alt="SSDP" class="logo">
                <span class="brand-text">ููุตุฉ ุชูุฒูุน ุงูุญูููุงุช</span>
            </div>
            
            <div class="nav-menu" id="nav-menu">
                <a href="#dashboard" class="nav-link active">ููุญุฉ ุงูุชุญูู</a>
                <a href="#products" class="nav-link">ุงูููุชุฌุงุช</a>
                <a href="#outlets" class="nav-link">ุงูููุงูุฐ</a>
                <a href="#orders" class="nav-link">ุงูุทูุจุงุช</a>
                <a href="#analytics" class="nav-link">ุงูุชุญูููุงุช</a>
            </div>
            
            <div class="nav-actions">
                <button class="lang-toggle" onclick="toggleLanguage()">EN</button>
                <button class="theme-toggle" onclick="toggleTheme()">๐</button>
                <button class="nav-toggle" onclick="toggleNav()">โฐ</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="container">
                <div class="section-header">
                    <h1 class="section-title">ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ</h1>
                    <div class="date-display" id="current-date"></div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card" data-stat="sales">
                        <div class="stat-icon">๐ฐ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="total-sales">0</div>
                            <div class="stat-label">ุฅุฌูุงูู ุงููุจูุนุงุช ุงูููู</div>
                            <div class="stat-change positive">+12.5%</div>
                        </div>
                    </div>
                    
                    <div class="stat-card" data-stat="vehicles">
                        <div class="stat-icon">๐</div>
                        <div class="stat-content">
                            <div class="stat-value" id="active-vehicles">0</div>
                            <div class="stat-label">ุงููุฑูุจุงุช ุงููุดุทุฉ</div>
                            <div class="stat-change positive">+2</div>
                        </div>
                    </div>
                    
                    <div class="stat-card" data-stat="customers">
                        <div class="stat-icon">๐ฅ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="active-customers">0</div>
                            <div class="stat-label">ุงูุนููุงุก ุงููุดุทูู</div>
                            <div class="stat-change positive">+5.2%</div>
                        </div>
                    </div>
                    
                    <div class="stat-card" data-stat="orders">
                        <div class="stat-icon">๐ฆ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="completed-orders">0</div>
                            <div class="stat-label">ุงูุทูุจุงุช ุงูููุชููุฉ</div>
                            <div class="stat-change positive">+8.1%</div>
                        </div>
                    </div>
                </div>

                <!-- Charts and Map -->
                <div class="dashboard-grid">
                    <div class="chart-container">
                        <h3>ุชุญููู ุงููุจูุนุงุช</h3>
                        <canvas id="sales-chart"></canvas>
                    </div>
                    
                    <div class="map-container">
                        <h3>ุงูุนูููุงุช ุงููุจุงุดุฑุฉ</h3>
                        <div id="operations-map"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h2>
                    <button class="btn btn-primary" onclick="openProductModal()">
                        <span class="btn-icon">+</span>
                        ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                    </button>
                </div>

                <!-- Product Filters -->
                <div class="filters-bar">
                    <div class="search-box">
                        <input type="text" id="product-search" placeholder="ุงูุจุญุซ ุนู ุงูููุชุฌุงุช...">
                        <span class="search-icon">๐</span>
                    </div>
                    
                    <select id="category-filter" class="filter-select">
                        <option value="">ุฌููุน ุงููุฆุงุช</option>
                        <option value="ุญูููุงุช ูุจุฑุฏุฉ">ุญูููุงุช ูุจุฑุฏุฉ</option>
                        <option value="ุญูููุงุช ุชูููุฏูุฉ">ุญูููุงุช ุชูููุฏูุฉ</option>
                    </select>
                    
                    <select id="brand-filter" class="filter-select">
                        <option value="">ุฌููุน ุงูุนูุงูุงุช</option>
                        <option value="Americana">ุฃูุฑููุงูุง</option>
                        <option value="SSDP">SSDP</option>
                    </select>
                </div>

                <!-- Products Grid -->
                <div class="products-grid" id="products-grid">
                    <!-- Products will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Outlets Section -->
        <section id="outlets" class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">ุฅุฏุงุฑุฉ ุงูููุงูุฐ</h2>
                    <button class="btn btn-primary" onclick="openOutletModal()">
                        <span class="btn-icon">+</span>
                        ุชุณุฌูู ูููุฐ ุฌุฏูุฏ
                    </button>
                </div>

                <!-- Outlets Map -->
                <div class="outlets-map-container">
                    <div id="outlets-map"></div>
                </div>

                <!-- Outlets List -->
                <div class="outlets-list" id="outlets-list">
                    <!-- Outlets will be loaded dynamically -->
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h3>
                <button class="modal-close" onclick="closeModal('product-modal')">&times;</button>
            </div>
            <form id="product-form" class="modal-form">
                <div class="form-group">
                    <label>ุฑูุฒ ุงูููุชุฌ (SKU)</label>
                    <input type="text" name="sku" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุงุณู ุจุงูุนุฑุจูุฉ</label>
                        <input type="text" name="name_ar" required>
                    </div>
                    <div class="form-group">
                        <label>ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ</label>
                        <input type="text" name="name_en" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>ุงููุฆุฉ</label>
                    <select name="category" required>
                        <option value="ุญูููุงุช ูุจุฑุฏุฉ">ุญูููุงุช ูุจุฑุฏุฉ</option>
                        <option value="ุญูููุงุช ุชูููุฏูุฉ">ุญูููุงุช ุชูููุฏูุฉ</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุณุนุฑ (ุฑูุงู)</label>
                        <input type="number" name="price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ุงููููุฉ</label>
                        <input type="number" name="stock_quantity" required>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('product-modal')">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">ุญูุธ ุงูููุชุฌ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/components.js"></script>
    <script src="/assets/js/api.js"></script>
    
    <!-- Fallback loading screen removal -->
    <script>
        // Ensure loading screen is removed after 3 seconds maximum
        setTimeout(() => {
            const loader = document.getElementById('loading-screen');
            if (loader && !loader.classList.contains('hidden')) {
                loader.classList.add('hidden');
                console.log('Loading screen removed by fallback');
            }
        }, 3000);
        
        // Also remove on any error
        window.addEventListener('error', () => {
            const loader = document.getElementById('loading-screen');
            if (loader) {
                loader.classList.add('hidden');
            }
        });
    </script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }
    </script>
</body>
</html>
